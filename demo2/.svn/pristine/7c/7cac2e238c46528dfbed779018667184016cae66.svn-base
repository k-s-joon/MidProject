<%@page import="message.vo.MessageVO"%>
<%@page import="java.util.List"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%
	List<MessageVO> msgList = 
	(List<MessageVO>) request.getAttribute("msgList");

 	String loginCode = session.getAttribute("logincode") == null ?
 			 "" : (String)session.getAttribute("loginCode");
// 	session.removeAttribute("msg");
%>
<!DOCTYPE html>
<html lang="ko">
<head>
<jsp:include page="/view/sidemain.jsp"></jsp:include>
  <jsp:include page="/view/topbar.jsp"></jsp:include>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
  <link rel="stylesheet" href="../css/sidemain.css">
  <link rel="stylesheet" href="<%=request.getContextPath() %>/css/main.css">
  <link rel="stylesheet" href="<%=request.getContextPath() %>/css/topbar.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>받은 쪽지함</title>
<!-- <link rel="stylesheet" href="../css/css.css"> -->
</head>
<body>
	<div class="container">
		<div class="row">
			<table class="table table-striped" style="text-align: center; border: 1px solid #dddddd">
				<thead>
					<tr>
					<th style="backgrond-color: #d9dfdf; text-align: center;">번호</th>
					<th style="backgrond-color: #d9dfdf; text-align: center;">내용</th>
					<th style="backgrond-color: #d9dfdf; text-align: center;">보낸날짜</th>
					<th style="backgrond-color: #d9dfdf; text-align: center;">발신자</th>
					<th colspan="2" style="backgrond-color: #eeeeee; text-align: center;">선택</th>
					</tr>
				</thead>
				<%
			 	int messageSize = msgList.size();
				if(messageSize > 0){
					for(int i=0; i<messageSize; i++){
				%>
				<tbody>
					<tr>
						<td><%=msgList.get(i).getMsgNo() %></td>
						<td><%=msgList.get(i).getMsgCon() %></td>
						<td><fmt:formatDate value="<%=msgList.get(i).getMsgDate() %>" pattern="yyyy-MM-dd" type="date"/></td>
						<td><%=msgList.get(i).getMemId() %></td>
						<td><a href="#채팅창"><button>채팅하기</button></a></td>
						<td><a href="<%=request.getContextPath() %>/message/delete.do?msgNo=<%=msgList.get(i).getMsgNo() %>"><button>삭제</button></a></td>
					</tr>
				</tbody>
				<%
				}
				}else{				
				%>
					<tr>
						<td colspan="5">받은 쪽지가 없습니다.</td>
					</tr>
				<%
				}
				%>
			</table>
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<!-- 	<script src="js/bototstrap.js"></script> -->
</body>
</html>